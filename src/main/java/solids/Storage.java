package solids;

import org.web3j.abi.EventEncoder;
import org.web3j.abi.EventValues;
import org.web3j.abi.TypeReference;
import org.web3j.abi.datatypes.Address;
import org.web3j.abi.datatypes.Event;
import org.web3j.abi.datatypes.Function;
import org.web3j.abi.datatypes.Utf8String;
import org.web3j.abi.datatypes.generated.Bytes32;
import org.web3j.abi.datatypes.generated.Uint256;
import org.web3j.crypto.Credentials;
import org.web3j.protocol.Web3j;
import org.web3j.protocol.core.DefaultBlockParameter;
import org.web3j.protocol.core.methods.request.EthFilter;
import org.web3j.protocol.core.methods.response.Log;
import org.web3j.protocol.core.methods.response.TransactionReceipt;
import org.web3j.tx.Contract;
import org.web3j.tx.TransactionManager;
import rx.Observable;
import rx.functions.Func1;

import java.math.BigInteger;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.List;
import java.util.concurrent.Future;

/**
 * Auto generated code.<br>
 * <strong>Do not modify!</strong><br>
 * Please use {@link org.web3j.codegen.SolidityFunctionWrapperGenerator} to update.
 *
 * <p>Generated with web3j version 2.2.1.
 */
public final class Storage extends Contract {
    private static final String BINARY = "606060405260408051908101604052600581527f302e302e35000000000000000000000000000000000000000000000000000000602082015260009080516200004d9291602001906200007e565b5034156200005a57600080fd5b5b600160a060020a0333166000908152600260205260409020606490555b62000128565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10620000c157805160ff1916838001178555620000f1565b82800160010185558215620000f1579182015b82811115620000f1578251825591602001919060010190620000d4565b5b506200010092915062000104565b5090565b6200012591905b808211156200010057600081556001016200010b565b5090565b90565b6113de80620001386000396000f300606060405236156100a15763ffffffff7c0100000000000000000000000000000000000000000000000000000000600035041663248bfc3b81146100a6578063300ebbf61461014d57806354fd4d501461025857806358aa61e7146102e3578063821954c41461039157806383197ef0146103fb5780638e84a8c114610422578063b48cc6e5146104c9578063c1ce56eb1461052e578063ff30b71714610564575b600080fd5b34156100b157600080fd5b61013960046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052818152929190602084018383808284375094965061064d95505050505050565b604051901515815260200160405180910390f35b341561015857600080fd5b6101e060046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f0160208091040260200160405190810160405281815292919060208401838380828437509496506107e695505050505050565b60405160208082528190810183818151815260200191508051906020019080838360005b8381101561021d5780820151818401525b602001610204565b50505050905090810190601f16801561024a5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561026357600080fd5b6101e06109c5565b60405160208082528190810183818151815260200191508051906020019080838360005b8381101561021d5780820151818401525b602001610204565b50505050905090810190601f16801561024a5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34156102ee57600080fd5b61013960046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052818152929190602084018383808284375094965050843594602001359350610a6392505050565b604051901515815260200160405180910390f35b341561039c57600080fd5b610139600480359060446024803590810190830135806020601f82018190048102016040519081016040528181529291906020840183838082843750949650610c0a95505050505050565b604051901515815260200160405180910390f35b341561040657600080fd5b610139610cf6565b604051901515815260200160405180910390f35b341561042d57600080fd5b6104b760046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f0160208091040260200160405190810160405281815292919060208401838380828437509496505093359350610df692505050565b60405190815260200160405180910390f35b34156104d457600080fd5b61013960046024813581810190830135806020601f82018190048102016040519081016040528181529291906020840183838082843750949650610f4695505050505050565b604051901515815260200160405180910390f35b341561053957600080fd5b610139600160a060020a0360043516602435611079565b604051901515815260200160405180910390f35b341561056f57600080fd5b61013960046024813581810190830135806020601f8201819004810201604051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f01602080910402602001604051908101604052818152929190602084018383808284378201915050505050509190803590602001908201803590602001908080601f0160208091040260200160405190810160405281815292919060208401838380828437509496506110f695505050505050565b604051901515815260200160405180910390f35b60006106a460026060604051908101604052806027815260200160008051602061137383398151915281526020017f642066696c657300000000000000000000000000000000000000000000000000815250610c0a565b5060206040519081016040526001846040518082805190602001908083835b602083106106e357805182525b601f1990920191602091820191016106c3565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051908190039020836040518082805190602001908083835b6020831061074857805182525b601f199092019160209182019101610728565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051506000805160206113938339815191529150339050604051600160a060020a0390911681526040602082018190526019818301527f46696c652063726561746564207375636365737366756c6c790000000000000060608301526080909101905180910390a15060015b92915050565b6107ee6112c0565b6108556001606060405190810160405280603381526020017f596f7520646f206e6f742068617665207065726d697373696f6e20746f20676581526020017f742070726f7065727479206d6574616461746100000000000000000000000000815250610c0a565b506001836040518082805190602001908083835b6020831061088957805182525b601f199092019160209182019101610869565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600101826040518082805190602001908083835b602083106108f057805182525b601f1990920191602091820191016108d0565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390208054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156109b75780601f1061098c576101008083540402835291602001916109b7565b820191906000526020600020905b81548152906001019060200180831161099a57829003601f168201915b505050505090505b92915050565b60008054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610a5b5780601f10610a3057610100808354040283529160200191610a5b565b820191906000526020600020905b815481529060010190602001808311610a3e57829003601f168201915b505050505081565b6000610aba60026060604051908101604052806027815260200160008051602061137383398151915281526020017f642066696c657300000000000000000000000000000000000000000000000000815250610c0a565b50826001866040518082805190602001908083835b60208310610aef57805182525b601f199092019160209182019101610acf565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051908190039020856040518082805190602001908083835b60208310610b5457805182525b601f199092019160209182019101610b34565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405190819003902060008481526020919091526040908190209190915560008051602061139383398151915290339051600160a060020a039091168152604060208201819052601a818301527f46696c652075706c6f61646564207375636365737366756c6c7900000000000060608301526080909101905180910390a15060015b949350505050565b600160a060020a0333166000908152600260205260408120541580610c475750600160a060020a0333166000908152600260205260409020548390105b15610cec576000805160206113938339815191523383604051600160a060020a038316815260406020820181815290820183818151815260200191508051906020019080838360005b83811015610ca95780820151818401525b602001610c90565b50505050905090810190601f168015610cd65780820380516001836020036101000a031916815260200191505b50935050505060405180910390a15060006107e0565b5060015b92915050565b6000610d5f6064606060405190810160405280603381526020017f596f7520646f206e6f742068617665207065726d697373696f6e20746f20646581526020017f7374726f79207468697320636f6e747261637400000000000000000000000000815250610c0a565b5060008051602061139383398151915233604051600160a060020a039091168152604060208201819052602a818301527f53656c66206465737472756374696e672e2e2e20676f6f646279652c206f6c6460608301527f20667269656e642e2e2e00000000000000000000000000000000000000000000608083015260a0909101905180910390a133600160a060020a0316ff5b90565b6000610e5f6001606060405190810160405280602781526020017f596f7520646f206e6f742068617665207065726d697373696f6e20746f20676581526020017f742066696c657300000000000000000000000000000000000000000000000000815250610c0a565b506001846040518082805190602001908083835b60208310610e9357805182525b601f199092019160209182019101610e73565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051908190039020836040518082805190602001908083835b60208310610ef857805182525b601f199092019160209182019101610ed8565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040519081900390206000838152602091909152604090205490505b9392505050565b6000610f9d60026060604051908101604052806027815260200160008051602061137383398151915281526020017f642066696c657300000000000000000000000000000000000000000000000000815250610c0a565b5060206040519081016040526001836040518082805190602001908083835b60208310610fdc57805182525b601f199092019160209182019101610fbc565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051506000805160206113938339815191529150339050604051600160a060020a039091168152604060208201819052601d818301527f50726f70657274792063726561746564207375636365737366756c6c7900000060608301526080909101905180910390a15060015b919050565b60006110d06064606060405190810160405280602a815260200160008051602061137383398151915281526020017f64206163636f756e747300000000000000000000000000000000000000000000815250610c0a565b5050600160a060020a038216600090815260026020526040902081905560015b92915050565b600061114d60026060604051908101604052806033815260200160008051602061137383398151915281526020017f642070726f7065727479206d6574616461746100000000000000000000000000815250610c0a565b50816001856040518082805190602001908083835b6020831061118257805182525b601f199092019160209182019101611162565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600101846040518082805190602001908083835b602083106111e957805182525b601f1990920191602091820191016111c9565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902090805161122d9291602001906112d2565b5060008051602061139383398151915233604051600160a060020a0390911681526040602082018190526024818301527f50726f7065727479206d6574616461746120616464656420737563636573736660608301527f756c6c7900000000000000000000000000000000000000000000000000000000608083015260a0909101905180910390a15060015b9392505050565b60206040519081016040526000815290565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061131357805160ff1916838001178555611340565b82800160010185558215611340579182015b82811115611340578251825591602001919060010190611325565b5b5061134d929150611351565b5090565b610df391905b8082111561134d5760008155600101611357565b5090565b905600596f7520646f206e6f742068617665207065726d697373696f6e20746f2061646d1d71c5daf4fae6a676dda683d6870c2a8d15348409779a2fe763b677d98fe2a165627a7a723058204c440be575979c6e330ff17074d4277ec49c693f5c619985c339b268681411c50029";

    private Storage(String contractAddress, Web3j web3j, Credentials credentials, BigInteger gasPrice, BigInteger gasLimit) {
        super(BINARY, contractAddress, web3j, credentials, gasPrice, gasLimit);
    }

    private Storage(String contractAddress, Web3j web3j, TransactionManager transactionManager, BigInteger gasPrice, BigInteger gasLimit) {
        super(BINARY, contractAddress, web3j, transactionManager, gasPrice, gasLimit);
    }

    public List<NoteEventResponse> getNoteEvents(TransactionReceipt transactionReceipt) {
        final Event event = new Event("Note",
                Arrays.asList(),
                Arrays.asList(new TypeReference <Address>() {
                }, new TypeReference <Utf8String>() {
                }));
        List<EventValues> valueList = extractEventParameters(event, transactionReceipt);
        ArrayList<NoteEventResponse> responses = new ArrayList<NoteEventResponse>(valueList.size());
        for (EventValues eventValues : valueList) {
            NoteEventResponse typedResponse = new NoteEventResponse();
            typedResponse.addr = (Address) eventValues.getNonIndexedValues().get(0);
            typedResponse.message = (Utf8String) eventValues.getNonIndexedValues().get(1);
            responses.add(typedResponse);
        }
        return responses;
    }

    public Observable<NoteEventResponse> noteEventObservable(DefaultBlockParameter startBlock, DefaultBlockParameter endBlock) {
        final Event event = new Event("Note",
                Arrays.asList(),
                Arrays.asList(new TypeReference <Address>() {
                }, new TypeReference <Utf8String>() {
                }));
        EthFilter filter = new EthFilter(startBlock, endBlock, getContractAddress());
        filter.addSingleTopic(EventEncoder.encode(event));
        return web3j.ethLogObservable(filter).map(new Func1<Log, NoteEventResponse>() {
            @Override
            public NoteEventResponse call(Log log) {
                EventValues eventValues = extractEventParameters(event, log);
                NoteEventResponse typedResponse = new NoteEventResponse();
                typedResponse.addr = (Address) eventValues.getNonIndexedValues().get(0);
                typedResponse.message = (Utf8String) eventValues.getNonIndexedValues().get(1);
                return typedResponse;
            }
        });
    }

    public Future <TransactionReceipt> addFile(Utf8String _propertyName, Utf8String _fileName) {
        Function function = new Function("addFile", Arrays.asList(_propertyName, _fileName), Collections.emptyList());
        return executeTransactionAsync(function);
    }

    public Future<Utf8String> getPropertyMetadata(Utf8String _propertyName, Utf8String _key) {
        Function function = new Function("getPropertyMetadata",
                Arrays.asList(_propertyName, _key),
                Arrays.asList(new TypeReference <Utf8String>() {
                }));
        return executeCallSingleValueReturnAsync(function);
    }

    public Future <Utf8String> version() {
        Function function = new Function("version",
                Arrays.asList(),
                Arrays.asList(new TypeReference <Utf8String>() {
                }));
        return executeCallSingleValueReturnAsync(function);
    }

    public Future <TransactionReceipt> uploadFile(Utf8String _propertyName, Utf8String _fileName, Bytes32 _data, Uint256 count) {
        Function function = new Function("uploadFile", Arrays.asList(_propertyName, _fileName, _data, count), Collections.emptyList());
        return executeTransactionAsync(function);
    }

    public Future <TransactionReceipt> checkPerms(Uint256 requiredPerms, Utf8String message) {
        Function function = new Function("checkPerms", Arrays.asList(requiredPerms, message), Collections.emptyList());
        return executeTransactionAsync(function);
    }

    public Future<TransactionReceipt> destroy() {
        Function function = new Function("destroy", Arrays.asList(), Collections.emptyList());
        return executeTransactionAsync(function);
    }

    public Future <Bytes32> getFile(Utf8String _propertyName, Utf8String _fileName, Uint256 count) {
        Function function = new Function("getFile",
                Arrays.asList(_propertyName, _fileName, count),
                Arrays.asList(new TypeReference <Bytes32>() {
                }));
        return executeCallSingleValueReturnAsync(function);
    }

    public Future<TransactionReceipt> addProperty(Utf8String _propertyName) {
        Function function = new Function("addProperty", Arrays.asList(_propertyName), Collections.emptyList());
        return executeTransactionAsync(function);
    }

    public Future <TransactionReceipt> addAccount(Address addr, Uint256 perms) {
        Function function = new Function("addAccount", Arrays.asList(addr, perms), Collections.emptyList());
        return executeTransactionAsync(function);
    }

    public Future<TransactionReceipt> addPropertyMetadata(Utf8String _propertyName, Utf8String _key, Utf8String _value) {
        Function function = new Function("addPropertyMetadata", Arrays.asList(_propertyName, _key, _value), Collections.emptyList());
        return executeTransactionAsync(function);
    }

    public static Future<Storage> deploy(Web3j web3j, Credentials credentials, BigInteger gasPrice, BigInteger gasLimit, BigInteger initialWeiValue) {
        return deployAsync(Storage.class, web3j, credentials, gasPrice, gasLimit, BINARY, "", initialWeiValue);
    }

    public static Future<Storage> deploy(Web3j web3j, TransactionManager transactionManager, BigInteger gasPrice, BigInteger gasLimit, BigInteger initialWeiValue) {
        return deployAsync(Storage.class, web3j, transactionManager, gasPrice, gasLimit, BINARY, "", initialWeiValue);
    }

    public static Storage load(String contractAddress, Web3j web3j, Credentials credentials, BigInteger gasPrice, BigInteger gasLimit) {
        return new Storage(contractAddress, web3j, credentials, gasPrice, gasLimit);
    }

    public static Storage load(String contractAddress, Web3j web3j, TransactionManager transactionManager, BigInteger gasPrice, BigInteger gasLimit) {
        return new Storage(contractAddress, web3j, transactionManager, gasPrice, gasLimit);
    }

    public static class NoteEventResponse {
        public Address addr;

        public Utf8String message;
    }
}
